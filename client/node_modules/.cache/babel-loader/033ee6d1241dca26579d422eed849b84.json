{"ast":null,"code":"var _jsxFileName = \"/home/deion/ttp-stockportfolio/client/src/component/Protected.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport HomeBase from \"./homeBase\";\nimport Transaction from \"./transactions/transactions\";\n\nclass auth extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      authorized: 'loading'\n    };\n  }\n\n  async componentDidMount() {\n    if (cookie.load('token') === undefined) {\n      this.setState({\n        authorized: 'Not authorized'\n      });\n    }\n\n    console.log(cookie.load('token'));\n    const config = {\n      method: 'get',\n      url: 'http://localhost:8080/auth/',\n      headers: {\n        Authorization: \"Bearer \" + cookie.load('token')\n      }\n    };\n\n    try {\n      let res = await axios(config);\n      this.setState({\n        authorized: 'authorized'\n      });\n    } catch (err) {\n      console.log(err);\n      this.setState({\n        authorized: 'Not authorzied'\n      });\n    }\n  }\n\n  render() {\n    if (this.state.authorized === 'loading') {\n      return React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"Loading\");\n    } else if (this.state.authorized === 'Not authorized') {\n      return React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, \"Unauthorized , Please Log In\");\n    } else {\n      return React.createElement(Route, {\n        exact: true,\n        path: \"/home\",\n        component: HomeBase,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default auth;","map":{"version":3,"sources":["/home/deion/ttp-stockportfolio/client/src/component/Protected.js"],"names":["React","Component","axios","cookie","BrowserRouter","Router","Switch","Route","HomeBase","Transaction","auth","constructor","props","state","authorized","componentDidMount","load","undefined","setState","console","log","config","method","url","headers","Authorization","res","err","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,SAAQC,aAAa,IAAIC,MAAzB,EAAkCC,MAAlC,EAA0CC,KAA1C,QAAsD,kBAAtD;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,WAAP,MAAwB,6BAAxB;;AAEA,MAAMC,IAAN,SAAmBT,SAAnB,CAA4B;AACxBU,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,UAAU,EAAC;AADJ,KAAX;AAGH;;AAED,QAAMC,iBAAN,GAAyB;AAErB,QAAGZ,MAAM,CAACa,IAAP,CAAY,OAAZ,MAAuBC,SAA1B,EAAoC;AAChC,WAAKC,QAAL,CAAc;AAACJ,QAAAA,UAAU,EAAC;AAAZ,OAAd;AACH;;AACDK,IAAAA,OAAO,CAACC,GAAR,CAAYjB,MAAM,CAACa,IAAP,CAAY,OAAZ,CAAZ;AACA,UAAMK,MAAM,GAAE;AACVC,MAAAA,MAAM,EAAE,KADE;AAEVC,MAAAA,GAAG,EAAE,6BAFK;AAGVC,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAE,YAAYtB,MAAM,CAACa,IAAP,CAAY,OAAZ;AADtB;AAHC,KAAd;;AAQA,QAAG;AACC,UAAIU,GAAG,GAAC,MAAMxB,KAAK,CAACmB,MAAD,CAAnB;AACA,WAAKH,QAAL,CAAc;AAACJ,QAAAA,UAAU,EAAC;AAAZ,OAAd;AACH,KAHD,CAGC,OAAMa,GAAN,EAAU;AACPR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACA,WAAKT,QAAL,CAAc;AAACJ,QAAAA,UAAU,EAAC;AAAZ,OAAd;AACH;AACJ;;AAEDc,EAAAA,MAAM,GAAE;AACJ,QAAG,KAAKf,KAAL,CAAWC,UAAX,KAAwB,SAA3B,EAAqC;AACjC,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ;AAKH,KAND,MAQK,IAAG,KAAKD,KAAL,CAAWC,UAAX,KAAwB,gBAA3B,EAA4C;AAC7C,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ;AAKH,KANI,MAQD;AACA,aACI,oBAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAC,OAAlB;AAA0B,QAAA,SAAS,EAAEN,QAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAIH;AACJ;;AAtDuB;;AAyD5B,eAAeE,IAAf","sourcesContent":["import React, {Component} from 'react'\nimport axios from 'axios'\nimport cookie from 'react-cookies';\nimport {BrowserRouter as Router , Switch, Route} from 'react-router-dom'\nimport HomeBase from \"./homeBase\"\nimport Transaction from \"./transactions/transactions\"\n\nclass auth extends Component{\n    constructor(props){\n        super(props)\n        this.state={\n            authorized:'loading'\n        }\n    }\n\n    async componentDidMount(){\n\n        if(cookie.load('token')===undefined){\n            this.setState({authorized:'Not authorized'})\n        }\n        console.log(cookie.load('token'))\n        const config ={ \n            method: 'get',\n            url: 'http://localhost:8080/auth/',\n            headers: {\n                Authorization: \"Bearer \" + cookie.load('token')\n            }\n        }\n\n        try{\n            let res=await axios(config)\n            this.setState({authorized:'authorized'})\n        }catch(err){\n            console.log(err)\n            this.setState({authorized:'Not authorzied'})\n        }\n    }\n\n    render(){\n        if(this.state.authorized==='loading'){\n            return (\n                <h1>\n                    Loading\n                </h1>\n            )\n        }\n\n        else if(this.state.authorized==='Not authorized'){\n            return (\n                <h1>\n                    Unauthorized , Please Log In\n                </h1>\n            )\n        }\n\n        else{\n            return (\n                <Route exact path=\"/home\" component={HomeBase}/>\n                \n            )\n        }\n    }\n}\n\nexport default auth;"]},"metadata":{},"sourceType":"module"}